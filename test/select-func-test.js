// Generated by CoffeeScript 1.10.0
var Rel, assert;

Rel = require('../lib/rel');

assert = require('chai').assert;

describe('A sum function', function() {
  beforeEach(function() {
    return this.sum = Rel.func('sum');
  });
  return it('works', function() {
    var q, user;
    user = new Rel.Table('user');
    q = user.where(this.sum(this.sum(user.column('age')).eq(1)));
    return assert.equal(q.toSql(), 'SELECT FROM "user" WHERE sum(sum("user"."age") = 1)');
  });
});
